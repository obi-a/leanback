<!DOCTYPE html>
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Working with CouchDB views</title>

<link rel="stylesheet" href="http://www.whisperservers.com/leanback/wp-content/themes/hybrid/style.css" type="text/css" media="all" />
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="http://www.whisperservers.com/leanback/xmlrpc.php" />

<meta name="generator" content="WordPress 3.5.1 - really-static 0.5" />
<meta name="template" content="Hybrid 1.0" />
<meta name="robots" content="index,follow" />
<meta name="author" content="admin" />
<meta name="copyright" content="Copyright (c) November 2011" />
<meta name="revised" content="Sunday, June 2nd, 2013, 6:08 pm" />
<link rel="alternate" type="application/rss+xml" title="Leanback &raquo; Feed" href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/feed/" />

<script type='text/javascript' src='http://www.whisperservers.com/leanback/wp-includes/js/jquery/jquery.js?ver=1.8.3'></script>
<link rel='prev' title='Find documents by key' href='http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/find-documents-by-key/' />
<link rel='next' title='Error handling' href='http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/error-handling/' />
<link rel='canonical' href='http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/design-documents-and-permanent-views/' />

<link rel="stylesheet" href="http://www.whisperservers.com/leanback/wp-content/plugins/wp-syntax/wp-syntax.css" type="text/css" media="screen" />

</head>

<body class="wordpress ltr en_US parent-theme y2013 m06 d09 h16 sunday logged-out singular singular-page singular-page-43 page-template-default page-43 primary-active secondary-inactive subsidiary-inactive">


<div id="body-container">

	
	<div id="header-container">

		<div id="header">

			<div id="site-title"><a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/" title="Leanback" rel="home"><span>Leanback</span></a></div>
			<div id="site-description"><span>Simple Ruby interface to CouchDB</span></div>

		</div><!-- #header -->

	</div><!-- #header-container -->

	
	<div id="container">

		
	<div id="content" class="hfeed content">

		<div class="breadcrumb breadcrumbs"><div class="breadcrumb-trail"><span class="trail-before"><span class="breadcrumb-title">Browse:</span></span> <a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/" title="Leanback" rel="home" class="trail-begin">Home</a> <span class="sep">/</span> <span class="trail-end">Working with CouchDB views</span></div></div>
		
			<div id="post-43" class="hentry page publish post-1 odd author-admin">

				<h1 class="page-title entry-title"><a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/design-documents-and-permanent-views/" title="Working with CouchDB views" rel="bookmark">Working with CouchDB views</a></h1>
				<div class="entry-content">
					<p>First we login to CouchDB and generate the auth_session token for making requests.</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">hash = Couchdb.<span style="color:#9900CC;">login</span><span style="color:#006600; font-weight:bold;">&#40;</span>username = <span style="color:#996600;">'samson'</span>,password =<span style="color:#996600;">'sam123'</span><span style="color:#006600; font-weight:bold;">&#41;</span> 
auth_session =  hash<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#996600;">&quot;AuthSession&quot;</span><span style="color:#006600; font-weight:bold;">&#93;</span></pre></div></div>

<p><strong>To Query a permanent view</strong></p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;contacts&quot;</span>, 
          <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'my_views'</span>, 
            <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'get_female_contacts'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
Couchdb.<span style="color:#9900CC;">find</span> view,auth_session 
&nbsp;
<span style="color:#008000; font-style:italic;"># =&gt; [{&quot;_id&quot;=&gt;&quot;Mary&quot;, &quot;_rev&quot;=&gt;&quot;5-bfcd67fd17dbb6a875af8f6dc497b15f&quot;, &quot;firstname&quot;=&gt;&quot;Mary&quot;, &quot;lastname&quot;=&gt;&quot;smith&quot;, </span>
<span style="color:#008000; font-style:italic;">#  &quot;phone&quot;=&gt;&quot;212-234-1234&quot;, &quot;email&quot;=&gt;&quot;mary@mail.com&quot;, &quot;gender&quot;=&gt;&quot;female&quot;}, </span>
<span style="color:#008000; font-style:italic;"># {&quot;_id&quot;=&gt;&quot;Nancy&quot;, &quot;_rev&quot;=&gt;&quot;1-d15a83d2a23b495c19df2595b636ecc8&quot;,  &quot;firstname&quot;=&gt;&quot;Nancy&quot;, &quot;lastname&quot;=&gt;&quot;Lee&quot;, </span>
<span style="color:#008000; font-style:italic;">#  &quot;phone&quot;=&gt;&quot;347-808-3734&quot;, &quot;email&quot;=&gt;&quot;nancy@mail.com&quot;, &quot;gender&quot;=&gt;&quot;female&quot;}]</span></pre></div></div>

<p>This is similar to sending a</p>

<div class="wp_syntax"><div class="code"><pre class="plain" style="font-family:monospace;">GET http://127.0.0.1:5984/[database]/_design/[design_doc]/_view/[view_name]</pre></div></div>

<p>For the above example</p>

<div class="wp_syntax"><div class="code"><pre class="plain" style="font-family:monospace;">GET http://127.0.0.1:5984/contacts/_design/my_views/_view/get_female_contacts</pre></div></div>

<p>Leanback parses the native JSON results to return only the data values.</p>
<p><strong>Query a view by key</strong></p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;contacts&quot;</span>, 
          <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'the_view'</span>, 
            <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'age'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
age = <span style="color:#996600;">&quot;36&quot;</span>
Couchdb.<span style="color:#9900CC;">find</span><span style="color:#006600; font-weight:bold;">&#40;</span>view,auth_session,key = age<span style="color:#006600; font-weight:bold;">&#41;</span>
&nbsp;
<span style="color:#008000; font-style:italic;"># =&gt; [{&quot;_id&quot;=&gt;&quot;Nancy&quot;, &quot;_rev&quot;=&gt;&quot;2-4404d0a5a1a3dff103fd46faf1e46c30&quot;, &quot;firstname&quot;=&gt;&quot;Nancy&quot;, &quot;lastname&quot;=&gt;&quot;Lee&quot;, </span>
<span style="color:#008000; font-style:italic;">#  &quot;phone&quot;=&gt;&quot;347-808-3734&quot;, &quot;email&quot;=&gt;&quot;nancy@mail.com&quot;, &quot;gender&quot;=&gt;&quot;female&quot;, &quot;age&quot;=&gt;&quot;36&quot;}]</span></pre></div></div>

<p>The above example will return all contacts with age = 36.</p>
<p>This is similar to sending a</p>

<div class="wp_syntax"><div class="code"><pre class="plain" style="font-family:monospace;">GET http://127.0.0.1:5984/[database]/_design/[design_doc]/_view/[view_name]?key=&quot;searchterm&quot;</pre></div></div>

<p>For the above example</p>

<div class="wp_syntax"><div class="code"><pre class="plain" style="font-family:monospace;">GET http://127.0.0.1:5984/contacts/_design/the_view/_view/age?key=&quot;36&quot;</pre></div></div>

<p>Leanback parses the native JSON results to return only the data values.</p>
<p>If you are running an admin party (with no admins in CouchDB), pass the auth_session as an empty string.</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;contacts&quot;</span>, 
           <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'the_view'</span>, 
              <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'age'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
age = <span style="color:#996600;">&quot;36&quot;</span>
Couchdb.<span style="color:#9900CC;">find</span><span style="color:#006600; font-weight:bold;">&#40;</span>view,<span style="color:#996600;">&quot;&quot;</span>,key = age<span style="color:#006600; font-weight:bold;">&#41;</span></pre></div></div>

<p><strong>Query Options</strong><br />
A set of options can be used to manipulate the query results.</p>
<p><strong>limit</strong><br />
Example to limit the number of results from a query:</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;contacts&quot;</span>, 
          <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'the_view'</span>, 
            <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'age'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
age = <span style="color:#996600;">&quot;36&quot;</span>
Couchdb.<span style="color:#9900CC;">find</span><span style="color:#006600; font-weight:bold;">&#40;</span>view,auth_session,key = age,options = <span style="color:#006600; font-weight:bold;">&#123;</span>:limit <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#006666;">10</span><span style="color:#006600; font-weight:bold;">&#125;</span><span style="color:#006600; font-weight:bold;">&#41;</span></pre></div></div>

<p>This will limit the results to 10.</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;contacts&quot;</span>, 
          <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'my_views'</span>, 
            <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'get_female_contacts'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
Couchdb.<span style="color:#9900CC;">find</span> view,auth_session,key=<span style="color:#0000FF; font-weight:bold;">nil</span>, options = <span style="color:#006600; font-weight:bold;">&#123;</span>:limit <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#006666;">12</span><span style="color:#006600; font-weight:bold;">&#125;</span></pre></div></div>

<p>This will limit the results to 12. </p>
<p>This does the GET request below:</p>

<div class="wp_syntax"><div class="code"><pre class="plain" style="font-family:monospace;">GET /contacts/_design/my_views/_view/get_female_contacts?limit=12</pre></div></div>

<p><strong>skip</strong><br />
To skip documents:</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;contacts&quot;</span>, 
          <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'my_views'</span>, 
            <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'get_female_contacts'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
Couchdb.<span style="color:#9900CC;">find</span> view,auth_session,key=<span style="color:#0000FF; font-weight:bold;">nil</span>, options = <span style="color:#006600; font-weight:bold;">&#123;</span>:skip <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#006666;">20</span><span style="color:#006600; font-weight:bold;">&#125;</span></pre></div></div>

<p>This will skip the first 20 documents. This does the GET request below:</p>

<div class="wp_syntax"><div class="code"><pre class="plain" style="font-family:monospace;">GET /contacts/_design/my_views/_view/get_female_contacts?skip=20</pre></div></div>

<p>Note that skip is considered a relatively expensive operation for CouchDB.</p>
<p><strong>descending</strong><br />
To return the view results in descending order (couchDB returns results in ascending order by default.) use options={:descending => true}<br />
Example:</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;contacts&quot;</span>, 
          <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'my_views'</span>, 
            <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'get_female_contacts'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
Couchdb.<span style="color:#9900CC;">find</span> view,auth_session,key=<span style="color:#0000FF; font-weight:bold;">nil</span>, options = <span style="color:#006600; font-weight:bold;">&#123;</span>:descending <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#0000FF; font-weight:bold;">true</span><span style="color:#006600; font-weight:bold;">&#125;</span></pre></div></div>

<p>This will be a GET request:</p>

<div class="wp_syntax"><div class="code"><pre class="plain" style="font-family:monospace;">GET /contacts/_design/my_views/_view/get_female_contacts?descending=true</pre></div></div>

<p><strong> startkey &#038; endkey</strong><br />
To return a range of results using couchDB&#8217;s startkey &#038; endkey, for example to query an employee database for employees within a salary range:</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">  view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;employees&quot;</span>, 
          <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'salary_finder'</span>, 
            <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'find_by_salary'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
 options = <span style="color:#006600; font-weight:bold;">&#123;</span>:startkey <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;53000&quot;</span>, <span style="color:#ff3333; font-weight:bold;">:endkey</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;99000&quot;</span><span style="color:#006600; font-weight:bold;">&#125;</span>
 Couchdb.<span style="color:#9900CC;">find</span> view, auth_session,key=<span style="color:#0000FF; font-weight:bold;">nil</span>, options</pre></div></div>

<p>This will return all employees within the salary range of 53000 to 99000.<br />
This does a GET request to:</p>

<div class="wp_syntax"><div class="code"><pre class="plain" style="font-family:monospace;">GET /employees/_design/salary_finder/_view/find_by_salary?startkey=53000&amp;endkey=99000</pre></div></div>

<p>To return all employees with salary 99000 or less:</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">  view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;employees&quot;</span>, 
          <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'salary_finder'</span>, 
            <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'find_by_salary'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
 options = <span style="color:#006600; font-weight:bold;">&#123;</span>:endkey <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;99000&quot;</span><span style="color:#006600; font-weight:bold;">&#125;</span>
 Couchdb.<span style="color:#9900CC;">find</span> view, auth_session,key=<span style="color:#0000FF; font-weight:bold;">nil</span>, options</pre></div></div>

<p>This does a GET request to:</p>

<div class="wp_syntax"><div class="code"><pre class="plain" style="font-family:monospace;">GET /employees/_design/salary_finder/_view/find_by_salary?endkey=99000</pre></div></div>

<p>To query with a complex startkey and endkey, for example to query an employee database for all male employees that are 28 years old:</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">  view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;employees&quot;</span>, 
            <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'my_views'</span>,
             <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'age_gender'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
options = <span style="color:#006600; font-weight:bold;">&#123;</span>:startkey <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#996600;">&quot;28&quot;</span>,<span style="color:#996600;">&quot;male&quot;</span><span style="color:#006600; font-weight:bold;">&#93;</span>, <span style="color:#ff3333; font-weight:bold;">:endkey</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#996600;">&quot;28&quot;</span>,<span style="color:#996600;">&quot;male&quot;</span><span style="color:#006600; font-weight:bold;">&#93;</span><span style="color:#006600; font-weight:bold;">&#125;</span>
Couchdb.<span style="color:#9900CC;">find</span> view, auth_session,key=<span style="color:#0000FF; font-weight:bold;">nil</span>,options</pre></div></div>

<p>The design document for the above query will look something like this:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #009900;">&#123;</span>
 <span style="color: #3366CC;">&quot;language&quot;</span> <span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;javascript&quot;</span><span style="color: #339933;">,</span>
 <span style="color: #3366CC;">&quot;views&quot;</span> <span style="color: #339933;">:</span><span style="color: #009900;">&#123;</span>
    <span style="color: #3366CC;">&quot;age_gender&quot;</span> <span style="color: #339933;">:</span> <span style="color: #009900;">&#123;</span>
      <span style="color: #3366CC;">&quot;map&quot;</span> <span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;function(doc){ if(doc.age &amp;&amp; doc.gender) emit([doc.age, doc.gender],doc); }&quot;</span>
    <span style="color: #009900;">&#125;</span>
 <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span></pre></div></div>

<p>Just like a GET request query directly to couchDB, the options could be combined in any order.<br />
This example below:</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">  view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;employees&quot;</span>, 
          <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'salary_finder'</span>, 
            <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'find_by_salary'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
 options = <span style="color:#006600; font-weight:bold;">&#123;</span>:startkey <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;53000&quot;</span>, <span style="color:#ff3333; font-weight:bold;">:endkey</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;99000&quot;</span>,:limit <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#006666;">20</span><span style="color:#006600; font-weight:bold;">&#125;</span>
 Couchdb.<span style="color:#9900CC;">find</span> view, auth_session,key=<span style="color:#0000FF; font-weight:bold;">nil</span>,options</pre></div></div>

<p>returns the first 20 employees within the salary range 53000 to 99000.</p>
<p><strong>Create a design document with permanent views:</strong></p>
<p>First define the views in a JSON file</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #006600; font-style: italic;">//my_views.json</span>
<span style="color: #009900;">&#123;</span>
 <span style="color: #3366CC;">&quot;language&quot;</span> <span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;javascript&quot;</span><span style="color: #339933;">,</span>
 <span style="color: #3366CC;">&quot;views&quot;</span> <span style="color: #339933;">:</span><span style="color: #009900;">&#123;</span>
    <span style="color: #3366CC;">&quot;get_email&quot;</span> <span style="color: #339933;">:</span> <span style="color: #009900;">&#123;</span>
      <span style="color: #3366CC;">&quot;map&quot;</span> <span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;function(doc){
         if(doc.lastname &amp;&amp; doc.email)
           emit(doc.id,{Firstname: doc.firstname, Lastname: doc.lastname, Email: doc.email});
        }&quot;</span>
    <span style="color: #009900;">&#125;</span>
 <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span></pre></div></div>

<p>Now create the design document and add the json file</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">doc = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'contacts'</span>, 
           <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'more_views'</span>, 
            <span style="color:#ff3333; font-weight:bold;">:json_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'/path/to/my_views.json'</span> <span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
Couchdb.<span style="color:#9900CC;">create_design</span> doc,auth_session 
&nbsp;
<span style="color:#008000; font-style:italic;"># =&gt; {&quot;ok&quot;=&gt;true, </span>
<span style="color:#008000; font-style:italic;"># &quot;id&quot;=&gt;&quot;_design/more_views&quot;, </span>
<span style="color:#008000; font-style:italic;"># &quot;rev&quot;=&gt;&quot;1-d67ae97ff03a98f68ddc300bf9ae5048&quot;}</span></pre></div></div>

<p>To query the view</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;contacts&quot;</span>, 
            <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'more_views'</span>, 
             <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'get_email'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
Couchdb.<span style="color:#9900CC;">find</span> view,auth_session 
&nbsp;
<span style="color:#008000; font-style:italic;"># =&gt; [{&quot;Firstname&quot;=&gt;&quot;Nancy&quot;, &quot;Lastname&quot;=&gt;&quot;Lee&quot;, &quot;Email&quot;=&gt;&quot;nancy@mail.com&quot;}, </span>
<span style="color:#008000; font-style:italic;">#        {&quot;Firstname&quot;=&gt;&quot;john&quot;, &quot;Lastname&quot;=&gt;&quot;smith&quot;, &quot;Email&quot;=&gt;&quot;john@mail.com&quot;}]</span></pre></div></div>

<p><strong>Query a View and Create it on the fly if it doesn’t already exist</strong></p>
<p>Let’s say we want to query a view, and create it on the fly if it doesn’t already exist, and still return the values. In this example we will query a view called get_emails view (which returns emails of all contacts), if this view doesn’t already exist it will be added to the database.</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;"><span style="color:#9966CC; font-weight:bold;">def</span> get_emails
   view = <span style="color:#006600; font-weight:bold;">&#123;</span>:database <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'contacts'</span>,
             <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'my_views'</span>,
               <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'get_emails'</span>,
                <span style="color:#ff3333; font-weight:bold;">:json_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'/path/to/my_views.json'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
   Couchdb.<span style="color:#9900CC;">find_on_fly</span><span style="color:#006600; font-weight:bold;">&#40;</span>view,auth_session<span style="color:#006600; font-weight:bold;">&#41;</span>
 <span style="color:#9966CC; font-weight:bold;">end</span>
&nbsp;
 email_list = get_emails<span style="color:#006600; font-weight:bold;">&#40;</span><span style="color:#006600; font-weight:bold;">&#41;</span>
 <span style="color:#CC0066; font-weight:bold;">puts</span> email_list.<span style="color:#9900CC;">inspect</span> 
&nbsp;
<span style="color:#008000; font-style:italic;"># =&gt; [{&quot;Name&quot;=&gt;&quot;Nancy&quot;, &quot;Email&quot;=&gt;&quot;nancy@mail.com&quot;}, {&quot;Name&quot;=&gt;&quot;John&quot;, &quot;Email&quot;=&gt;&quot;john@mail.com&quot;}]</span></pre></div></div>

<p>In get_emails(),</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">Couchdb.<span style="color:#9900CC;">find_on_fly</span><span style="color:#006600; font-weight:bold;">&#40;</span>view<span style="color:#006600; font-weight:bold;">&#41;</span></pre></div></div>

<p>sends a request to the design_document (my_views) and view (get_emails). If this view is found in the database, it returns an Array with the name and email of all contacts:</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;"><span style="color:#008000; font-style:italic;">#=&gt; [{&quot;Name&quot;=&gt;&quot;Nancy&quot;, &quot;Email&quot;=&gt;&quot;nancy@mail.com&quot;}, {&quot;Name&quot;=&gt;&quot;John&quot;, &quot;Email&quot;=&gt;&quot;john@mail.com&quot;}]</span></pre></div></div>

<p>if the design document and view doesn’t already exist, it creates it and adds it to the database using the json document</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;"><span style="color:#ff3333; font-weight:bold;">:json_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'/path/to/my_views.json'</span></pre></div></div>

<p>next it sends a request for the view again and then it returns the email list.</p>
<p>So the first time the get_emails() method is called, the view will be created on the fly and added to the database. Future calls to get_email would simply return the values from the view.</p>
<p>Source for the get_emails view:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #006600; font-style: italic;">//my_views.json</span>
<span style="color: #009900;">&#123;</span>
 <span style="color: #3366CC;">&quot;language&quot;</span> <span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;javascript&quot;</span><span style="color: #339933;">,</span>
 <span style="color: #3366CC;">&quot;views&quot;</span> <span style="color: #339933;">:</span><span style="color: #009900;">&#123;</span>
   <span style="color: #3366CC;">&quot;get_emails&quot;</span> <span style="color: #339933;">:</span> <span style="color: #009900;">&#123;</span>
     <span style="color: #3366CC;">&quot;map&quot;</span> <span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;function(doc){
        if(doc.firstname &amp;&amp; doc.email)
          emit(doc.id,{Name: doc.firstname, Email: doc.email});
       }&quot;</span>
   <span style="color: #009900;">&#125;</span>
 <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span></pre></div></div>

<p>You can also query a permanent view with a key and create it on the fly, if it doesn’t already exist. Let’s say we want to view all contacts with age = “36”, and we already defined the view in a json file (view_age.json).</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;"> view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'contacts'</span>, 
           <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'the_view'</span>, 
           <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'age'</span>,
            <span style="color:#ff3333; font-weight:bold;">:json_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'/path/to/view_age.json'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
 age = <span style="color:#996600;">'36'</span>
 Couchdb.<span style="color:#9900CC;">find_on_fly</span><span style="color:#006600; font-weight:bold;">&#40;</span>view,auth_session,key = age<span style="color:#006600; font-weight:bold;">&#41;</span>
&nbsp;
<span style="color:#008000; font-style:italic;">#=&gt; [{&quot;_id&quot;=&gt;&quot;Nancy&quot;, &quot;_rev&quot;=&gt;&quot;2-4404d0a5a1a3dff103fd46faf1e46c30&quot;, &quot;firstname&quot;=&gt;&quot;Nancy&quot;, &quot;lastname&quot;=&gt;&quot;Lee&quot;, </span>
<span style="color:#008000; font-style:italic;"># &quot;phone&quot;=&gt;&quot;347-808-3734&quot;, &quot;email&quot;=&gt;&quot;nancy@mail.com&quot;, &quot;gender&quot;=&gt;&quot;female&quot;, &quot;age&quot;=&gt;&quot;36&quot;}]</span></pre></div></div>

<p>The above example will query the design_document (the_view) and view (age) in the database (contacts), using the key (age). If the view doesn’t exist it will be created from the json document (view.age.json). And then return the values from the view.</p>
<p>This is similar to sending a</p>

<div class="wp_syntax"><div class="code"><pre class="plain" style="font-family:monospace;">GET http://127.0.0.1:5984/contacts/_design/the_view/_view/age?key=&quot;36&quot;</pre></div></div>

<p>The view is generated from the source code:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #006600; font-style: italic;">//view_age.json</span>
<span style="color: #009900;">&#123;</span>
 <span style="color: #3366CC;">&quot;language&quot;</span> <span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;javascript&quot;</span><span style="color: #339933;">,</span>
 <span style="color: #3366CC;">&quot;views&quot;</span> <span style="color: #339933;">:</span><span style="color: #009900;">&#123;</span>
   <span style="color: #3366CC;">&quot;age&quot;</span> <span style="color: #339933;">:</span> <span style="color: #009900;">&#123;</span>
     <span style="color: #3366CC;">&quot;map&quot;</span> <span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;function(doc){
        if(doc.age)
          emit(doc.age,doc);
       }&quot;</span>
    <span style="color: #009900;">&#125;</span>
 <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span></pre></div></div>

<p>If you are running an admin party (i.e no admins users on CouchDB), simply leave out auth_session parameter in the method.<br />
Some examples:</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;contacts&quot;</span>, 
           <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'my_views'</span>, 
            <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'get_female_contacts'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
Couchdb.<span style="color:#9900CC;">find</span> view</pre></div></div>


<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">doc = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'contacts'</span>,
         <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'more_views'</span>, 
          <span style="color:#ff3333; font-weight:bold;">:json_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'/path/to/my_views.json'</span> <span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
Couchdb.<span style="color:#9900CC;">create_design</span> doc</pre></div></div>


<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">view = <span style="color:#006600; font-weight:bold;">&#123;</span>:database <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'contacts'</span>,
         <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'my_views'</span>,
          <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'get_emails'</span>,
           <span style="color:#ff3333; font-weight:bold;">:json_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'/path/to/my_views.json'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
Couchdb.<span style="color:#9900CC;">find_on_fly</span><span style="color:#006600; font-weight:bold;">&#40;</span>view,auth_session<span style="color:#006600; font-weight:bold;">&#41;</span></pre></div></div>

<p>This works for all methods except when you are passing a key value to the database. In that case, pass an empty string in place of the auth_session.</p>
<p>Example:</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">&quot;contacts&quot;</span>, 
          <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'the_view'</span>, 
           <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'age'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
age = <span style="color:#996600;">&quot;36&quot;</span>
Couchdb.<span style="color:#9900CC;">find</span><span style="color:#006600; font-weight:bold;">&#40;</span>view,<span style="color:#996600;">&quot;&quot;</span>,key = age<span style="color:#006600; font-weight:bold;">&#41;</span></pre></div></div>

<p>And</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;"> view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'contacts'</span>, 
           <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'the_view'</span>, 
            <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'age'</span>,
             <span style="color:#ff3333; font-weight:bold;">:json_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'/path/to/view_age.json'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
 age = <span style="color:#996600;">'36'</span>
 Couchdb.<span style="color:#9900CC;">find_on_fly</span><span style="color:#006600; font-weight:bold;">&#40;</span>view,<span style="color:#996600;">&quot;&quot;</span>,key = age<span style="color:#006600; font-weight:bold;">&#41;</span></pre></div></div>

<p><strong>Query Options with Find on fly </strong><br />
All the query options described earlier are also work for find_on_fly(). Example:</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;"> view = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#ff3333; font-weight:bold;">:database</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'contacts'</span>, 
           <span style="color:#ff3333; font-weight:bold;">:design_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'the_view'</span>, 
            <span style="color:#ff3333; font-weight:bold;">:view</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'age'</span>,
             <span style="color:#ff3333; font-weight:bold;">:json_doc</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'/path/to/view_age.json'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
 age = <span style="color:#996600;">'36'</span>
 Couchdb.<span style="color:#9900CC;">find_on_fly</span><span style="color:#006600; font-weight:bold;">&#40;</span>view,auth_session,key = age, options= <span style="color:#006600; font-weight:bold;">&#123;</span>:limit <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#006666;">12</span><span style="color:#006600; font-weight:bold;">&#125;</span><span style="color:#006600; font-weight:bold;">&#41;</span></pre></div></div>

<p>The above example will return the first 12 contacts that are 36 years old.</p>
									</div><!-- .entry-content -->

				
			</div><!-- .hentry -->

			
			
			
		
		
	
	</div><!-- .content .hfeed -->

		
	<div id="primary" class="sidebar aside">

		
		<div id="hybrid-nav-menu-3" class="widget nav-menu widget-nav-menu"><div class="widget-wrap widget-inside"><h3 class="widget-title">Leanback</h3><div class="menu-sidebar-container"><ul id="menu-sidebar" class="nav-menu"><li id="menu-item-13" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-ancestor current-menu-parent current_page_parent current_page_ancestor menu-item-13"><a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/leanback/">Leanback</a><ul class="sub-menu"><li id="menu-item-14" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-14"><a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/leanback/installation/">Install</a></li><li id="menu-item-15" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15"><a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/basic-couchdb-operations/">Basic CouchDB Operations</a></li><li id="menu-item-41" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-41"><a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/find-documents-by-key/">Find documents by key</a></li><li id="menu-item-167" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-167"><a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/find-document-by-multiple-keys/">Find document by multiple Keys</a></li><li id="menu-item-140" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-140"><a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/count-documents-by-key/">Count documents by key</a></li><li id="menu-item-175" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-175"><a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/count-by-multiple-documents/">Count documents by multiple keys</a></li><li id="menu-item-45" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-43 current_page_item menu-item-45"><a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/design-documents-and-permanent-views/">Working with CouchDB views</a></li><li id="menu-item-67" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-67"><a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/error-handling/">Error handling</a></li><li id="menu-item-96" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-96"><a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/couchdb-configuration/">CouchDB Configuration</a></li><li id="menu-item-102" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-102"><a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/couchdb-security/">CouchDB Security</a></li><li id="menu-item-105" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-105"><a href="http://www.whisperservers.com/leanback/wp-content/plugins/really-static/static/setting-the-bind_address-port/">CouchDB Bind_Address &#038; Port</a></li></ul></li><li id="menu-item-142" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-142"><a href="https://github.com/obi-a/leanback/blob/master/Changelog.rdoc">Changes</a></li><li id="menu-item-78" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-78"><a href="https://github.com/obi-a/leanback">Source Code</a></li></ul></div></div></div>
		
	</div><!-- #primary .aside -->


	</div><!-- #container -->

	<div id="footer-container">

		
		<div id="footer">

			<div class="footer-insert"><p class="copyright">Copyright &#169; 2013 <a href="http://obi-akubue.org">obi-akubue.org</a>.</p></div>
		</div><!-- #footer -->

		
	</div><!-- #footer-container -->

</div><!-- #body-container -->


    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20190925-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();
</script>

<a style='color:transparent;position:absolute;left:-99999px;z-index:-99999' href='http://www.wpdownloadmanager.com/' title='Premium Wordpress Plugin download manager'>Premium Wordpress Plugin</a>
    <script type='text/javascript' src='http://www.whisperservers.com/leanback/wp-content/themes/hybrid/library/js/drop-downs.js?ver=20110705'></script>

</body>
</html>
<!-- Dynamic page generated in 0.686 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2013-06-09 16:31:57 -->

<!-- super cache -->